<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>lesson3-2</title>
</head>

<body>
    <script>
        'use strict';

        /**
         *корзина: [[товар],[товар],[товар]]
         *товар: [название, кол-во, цена]
         *         !!!Не производится проверок на правильность ввода!!!     
        */

        const bascet = [];

        /** 
         * Блок подтверждения начала работы с корзиной. Если отказ, то перебрасывает на блок if, завершая работу с корзиной.
        */
        while (confirm(`Начать работу с корзиной?`) === true) {
            addToBascet();
            console.log(`В корзине ${bascet.length} единица(-ы) товара(-ов) на сумму ${bascetPrice()} рублей.`);
        }

        /** 
         * В зависимости от состава корзины либо выводит результат либо завершает работу с козиной.
        */
        if (bascet.length != 0) {
            alert(`По итогу: в корзине ${bascet.length} единица(-ы) товара(-ов) на сумму ${bascetPrice()} рублей. До свидания.`);
            console.log(`В корзине ${bascet.length} единица(-ы) товара(-ов) на сумму ${bascetPrice()} рублей.`);
        } else {
            alert(`Ваша корзина пуста. До свидания.`);
        };

        /**
         * Функция наполняет корзину товаром. Данные по товару запрашиваются от пользователя         
         * @returns {boolean} Возвращает состояние подтверждения/отмены о дальнейшей работе с корзиной
         */
        function addToBascet() {
            if (confirm(`Добавить товар в корзину?`)) {
                let goodName = prompt('Введите название продукта');
                let goodVol = +prompt('Введите количество продукта');
                let goodPrice = +prompt('Введите цену продукта');

                const goodDatas = [];
                goodDatas.push(goodName, goodVol, goodPrice);
                bascet.push(goodDatas);
                return true;
            } else {
                return false;
            }
        }

        /**
         * Функция считает стоимость корзины         
         * @returns {number} Возращается стоимость корзины
         */
        function bascetPrice() {
            let bascetPrice = 0;

            for (let i = 0; i <= bascet.length - 1; i++) {
                bascetPrice += (bascet[i][1] * bascet[i][2]);
            }
            return bascetPrice;
        }
    </script>
</body>

</html>
